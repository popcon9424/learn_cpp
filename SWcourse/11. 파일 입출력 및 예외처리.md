## 11. 파일 입출력 및 예외처리

---

##### 1. 파일 스트림

1. 스트림이란

   - 객체에 대한 선언 및 라이브러리에 객체 관련 함수가 포함되어 있음
   - iostream : 입출력과 관련된 일련의 흐름

2. 표준 입출력 스트림

   - ios 클래스의 스트림 형식 조정 함수

     |     형식조정함수      |              의미               |          사용 예           |
     | :-------------------: | :-----------------------------: | :------------------------: |
     |     ios::width(n)     |    출력 시 한 필드의 폭 지정    |       cout.width(10)       |
     |     ios::fill(n)      |    빈 공간을 문자 n으로 채움    |       cout.fill('*')       |
     |   ios::precision(n)   | 출력 시 실수의 유효자리 수 지정 |     cout.precision(3)      |
     | ios::setf(형식플래그) |        형식 플래그 설정         |    cout.setf(ios::hex);    |
     |     ios::unset(n)     |      형식 플래그 설정 해제      | cout.unset(ios_base::hex); |

3. 파일 스트림이란

   ```c++
   #include <fstream>
   ```

   ```c++
   ofstream file("sample.txt", ios::app|ios_binary);
   file.close();
   ```



##### 2. 파일 입출력

1. 텍스트 파일의 입출력

   - 출력 연산자 형식 : 파일객체명<<저장할내용;

   - 추출 연산자의 이용

     ```C++
     ofile<<num<<endl;
     ofile<<dnum<<endl;
     ofile<<str<<endl;
     ```

     ```C++
     ifstreamifile("file.dat");
     
     ifile>>num;
     ifile>>dnum;
     ifile>>str;
     ifile.close();
     ```

     - 추출연산자(>>)로 입력받기 위해 공백 문자 및 개행 문자 포함

2. 이진 파일의 입출력

   - read, write 함수 : 이진 모드(binary mode) 설정 후 함수 이용 가능

     ```C++
     istream & read(unsigned char* buf, int size);
     ostream & write(constunsigned char* buf, int size);
     ```

   - 텍스트 파일 vs 이진 파일

     |                 텍스트 파일                 |           이진 파일            |
     | :-----------------------------------------: | :----------------------------: |
     |              모두 문자로 변환               |     메모리 크기 만큼 저장      |
     |   저장 내용이 많을 경우 시간이 오래 소요    | 빠르게 저장하고 읽어올 수 있음 |
     |    저장 내용이 많을 경우 파일 크기 커짐     |   편집기 등을 통해 확인 불가   |
     | 저장 내용은 편집기 등을 통해 즉시 확인 가능 |                                |



##### 3. C++에서 예외처리방법

1. 예외란?

   - 외부 요인에 의한 문제가 발생할 때
   - 개발자의 많은 노력과 시간을 요함
   - c++에서는 구조적으로 예외 처리 가능 방법을 제공
     => 개발자 실수로 인한 오작동 방지를 통한 안전한 프로그래밍 가능,
           프로그램 가독력 향상을 통한 손쉬운 유지보수 가능

2. try ~catch를 이용한 예외처리방법

   ```C++
   try{
       [명령문;]		// 예외 점검 영역
   }
   catch (예외종류)	// 두 블록 사이 다른 명령 기술 불가
   {
       [명령문;]		// 예외 처리 코드
   }
   ```

   - try 블록에서 발생한 예외를 받아오는 매개변수를 자료형과 함께 선언
   - 하나의 try 블록에 catch 블록이 여러 개 올 수도 있음
     - 예외가 여러 유형으로 발생되는 경우
     - 예외 종류에 따라 catch 블록 수행
     - ... 으로 표현하면 그 이외의 경우

3. throw를 이용한 예외전달

   - 형식

     ```c++
     throw [예외종류]		// 변수, 상수, 객체 등의 모든 종류의 데이터
     ```

   - catch 블록의 매개변수로 전달됨

4. 예외 클래스의 사용

   - 예외 객체를 만들어서 전달할 경우 여러 정보를 한꺼번에 전달 가능